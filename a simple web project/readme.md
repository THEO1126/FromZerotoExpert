# å¿«æ·

éå†mapé›†åˆ **iter**

```
for (String s : map.keySet()) {
    
}
```

è¾“å‡º **sout**

```
System.out.println("");
```

# 1ã€ä¸€ä¸ªæœ€ç®€å•çš„webé¡µé¢

ğŸ§· [ä»0è®¾è®¡ä¸€ä¸ªwebé¡¹ç›®-è·Ÿç€å¸…åœ°ç©è½¬æ ¡æ‹›ï¼Œæ‹¿æå¤§å‚offerPlayOffer](https://www.playoffer.cn/253.html)

## 1.1 åˆ›å»ºè¿œç¨‹ä»“åº“

ç•¥ğŸ¤¡

## 1.2 ä¸€ä¸ªæœ€ç®€å•çš„webé¡µé¢

å¹³æ—¶æˆ‘ä»¬å­¦ä¹ ä¸€é—¨è¯­è¨€çš„æ—¶å€™ï¼Œæœ€ç®€å•çš„ä¸€ä¸ªç¨‹åºå°±æ˜¯åœ¨æ§åˆ¶å°æ‰“å°ä¸€è¡Œ hello worldï¼Œåœ¨æˆ‘ä»¬çš„ web æœåŠ¡é‡Œï¼Œä¸€ä¸ªæœ€ç®€å•çš„ web æœåŠ¡å°±æ˜¯å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥`http://localhost/FromZerotoExpert` è¿™ä¸ªç½‘å€æ—¶ï¼Œå±•ç¤ºä¸€ä¸ªé¡µé¢ï¼Œè¿™ä¸ªé¡µé¢æœ‰å¦‚ä¸‹æ–‡å­—ï¼šå—¨ï¼Œæ¬¢è¿æ‚¨æ¥åˆ° from zero to expert.

å¦‚æœä½ å¯ä»¥æˆåŠŸå±•ç¤ºè¿™ä¸ªé¡µé¢ï¼Œä½ å°±å®Œæˆäº†æœ€é‡è¦çš„ä¸€æ­¥äº†ï¼Œé‚£å°±æ˜¯ä½ çš„ web æœåŠ¡åˆ›å»ºæˆåŠŸäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥ä¸åœç€æ¥ä¸°å¯Œæˆ‘ä»¬çš„æœåŠ¡äº†ã€‚

æ‰€ä»¥ç¬¬äºŒä¸ªä»»åŠ¡ï¼Œæ˜¯æœ€ç®€å•äº¦æˆ–æœ€éš¾ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼Œåˆ›å»ºä¸€ä¸ª web æœåŠ¡ï¼Œåœ¨æµè§ˆå™¨è¾“å…¥`http://localhost/FromZerotoExpert`è¿™ä¸ªåœ°å€åï¼Œå‡ºç°ä¸€ä¸ª html é¡µé¢ï¼Œé¡µé¢å±•ç¤º **å—¨ï¼Œæ¬¢è¿æ‚¨æ¥åˆ° from zero to expert.**ã€‚

**å­¦ä¹ æŒ‡å—**ï¼šæŠ€æœ¯é€‰å‹ä¼˜å…ˆçº§ï¼šspringboot=>spring=>servletï¼Œå¦‚æœè¿™äº›éƒ½æ²¡æœ‰å­¦ä¹ è¿‡ï¼Œè¯´æ˜ä½  web 0 åŸºç¡€ï¼Œé‚£ä¹ˆè¯·æŒ‰ç…§è¿™ä¸ªæŠ€æœ¯æ ˆå­¦ä¹ ï¼šhmtl=>css=>javascript=>servletï¼Œå­¦å®Œservletï¼Œå³å¯å®Œæˆã€‚

**èµ„æ–™æ¨è**ï¼šå¦‚æœä½ ä¸æ˜¯æ°¸ä¹…ä¼šå‘˜ï¼Œæˆ‘ç»™ä½ æ‰¾äº†Bç«™é»‘é©¬çš„javawebï¼š[Javawebå…¥é—¨](https://www.bilibili.com/video/BV1Qf4y1T7Hx)ã€‚å…ˆè·³è¿‡mysql+jdbcçš„å­¦ä¹ ï¼Œç›´æ¥å­¦ä¹ **maven(P41~P45)**ï¼Œå­¦å®Œä»hmtl(P61)å¼€å­¦å­¦åˆ°servletçš„ P108 ç»“æŸã€‚é‚£ä¹ˆä½ å°±æˆåŠŸå…¥é—¨äº†ã€‚å½“ç„¶ï¼Œä½ è¦é‡å¤´çœ‹åˆ°å°¾ä¹Ÿè¡Œï¼Œå› ä¸ºéšç€å­¦ä¹ è¿›åº¦ï¼Œmysqlç­‰è¿™äº›ä¹Ÿæ˜¯ è¦å­¦çš„ã€‚

ğŸ“Œ **ä»»åŠ¡ï¼š**

å¼€å§‹æ—¶é—´ï¼š2022å¹´10æœˆ24æ—¥

**maven**ï¼š(P42~P46) âœ…

**hmtl(P61)-servletçš„ P108**ï¼šP61-P108 âœ… 

å®Œæˆæ—¶é—´ï¼š2022å¹´10æœˆ28æ—¥

### 1.2.1 mavenä¸‹è½½ä¸ç¯å¢ƒé…ç½®

- é…ç½®ç¯å¢ƒ

![image-20221025163856883](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025163856883.png)

![image-20221025163908705](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025163908705.png)

![image-20221025163925491](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025163925491.png)

 æ•™ç¨‹ï¼šhttps://blog.csdn.net/u012660464/article/details/114113349

- **ä¸‹è½½ï¼š**

ğŸ§· ä½¿ç”¨meavn3.6.3ç‰ˆæœ¬ï¼Œé«˜ç‰ˆæœ¬ä¸å…¼å®¹ä¼šæŠ¥é”™ 

> é“¾æ¥ï¼šhttps://pan.baidu.com/s/12SuxtOXiUhNgkb0DH1eyCw
> æå–ç ï¼šgnaf

- **ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æœ¬åœ°ä»“åº“åœ°å€**

![image-20221025164037287](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025164037287.png)

- **æ·»åŠ é˜¿é‡Œäº‘é•œåƒ**

  D:\program\Java\repository\apache-maven-3.6.3\conf\settings.xml

  ```xml
  <mirror>
      <id>alimaven</id>
      <name>aliyun maven</name>
      <url>
          http://maven.aliyun.com/nexus/content/groups/public/
      </url>
      <mirrorOf>central</mirrorOf>        
  </mirror>
  ```

  <img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20220609112753903.png" alt="image-20220609112753903" style="zoom:67%;" />

### 1.2.2 é…ç½®Tomcatè¿è¡Œé¡¹ç›®

#### TomcatåŸºæœ¬ä½¿ç”¨

**Tomcat**

æ•™ç¨‹ï¼šhttps://blog.csdn.net/zzvar/article/details/114896761ã€

ä¸‹è½½ï¼š[Apache TomcatÂ® - Apache Tomcat 10 Software Downloads](https://tomcat.apache.org/download-10.cgi)

>é“¾æ¥ï¼šhttps://pan.baidu.com/s/1CONf8KVXM4gyJj4pxjFBkA
>æå–ç ï¼šrb0t

å¯åŠ¨Tocat

> **æ‰“å¼€ starup.bat**  è·¯å¾„ï¼š D:\program\Java\repository\apache-tomcat-9.0.43\bin\starup.bat
>
> <img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027104643131.png" alt="image-20221027104643131" style="zoom:50%;" />

**å…³é—­Tomcat**

> å¼ºåˆ¶å…³é—­ï¼šç›´æ¥ x çª—å£
>
> æ­£å¸¸å…³é—­ ï¼šbin\shutdown.bat æˆ– ctrl + c





**ä¹±ç è§£å†³æ–¹å¼ï¼š**

>  æ‰“å¼€ D:\program\Java\repository\apache-tomcat-9.0.43\conf\logging.properties
>
> æ›´æ”¹ç¼–ç æ–¹å¼   `java.util.logging.ConsoleHandler.encoding = GBK
>
> ![image-20221027105107007](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027105107007.png)

**è®¿é—®localhost:8080**

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027104717822.png" alt="image-20221027104717822" style="zoom:50%;" />



#### Tomcaté…ç½®å’Œéƒ¨ç½²é¡¹ç›®

- ä¿®æ”¹ç«¯å£å·

  conf/server.xml

  ![image-20221027115519168](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027115519168.png)

- å¯åŠ¨å¯èƒ½å‡ºç°çš„é—®é¢˜

  1. ç«¯å£å·å†²çªï¼šæ‰¾åˆ°å¯¹åº”ç¨‹åºï¼Œå°†å…¶å…³é—­
  2. å¯åŠ¨å™¨ä¸€é—ªè€Œè¿‡ï¼Œé‡æ–°æ£€æŸ¥JAVA_HOMEæ˜¯å¦é…ç½®æ­£ç¡®
  3. Tomcatéƒ¨ç½²é¡¹ç›®

- Tomcatéƒ¨ç½²é¡¹ç›®

  - å°†é¡¹ç›®æ”¾ç½®åˆ°webappsç›®å½•ä¸‹ï¼Œå³éƒ¨ç½²å®Œæˆ

  - ä¸€èˆ¬é¡¹ç›®ä¼šè¢«æ‰“åŒ…æˆwaråŒ…ï¼Œå°†waråŒ…æ”¾åœ¨webappsç›®å½•ä¸‹ï¼ŒTomcatä¼šè‡ªåŠ¨è§£å‹waræ–‡ä»¶



#### IDEAæ„å»ºMaven Webé¡¹ç›®

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨éª¨æ¶**

- é¡¹ç›®ç»“æ„

![image-20221027120605660](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027120605660.png)

- åˆ›å»ºMaven Webé¡¹ç›®

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027121122418.png" alt="image-20221027121122418" style="zoom:80%;" />

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027121330176.png" alt="image-20221027121330176" style="zoom:80%;" />

- æ‰‹åŠ¨åˆ›å»ºJavaç›®å½•å’Œresourcesç›®å½•

![image-20221027122344023](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027122344023.png)

**æ–¹æ³•äºŒï¼šä¸ä½¿ç”¨éª¨æ¶**

![image-20221027122643438](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027122643438.png)

#### IDEAä¸­ä½¿ç”¨Tomcat

- æ·»åŠ é…ç½®

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027121701575.png" alt="image-20221027121701575" style="zoom:80%;" />

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027121744542.png" alt="image-20221027121744542" style="zoom:80%;" />

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027121823100.png" alt="image-20221027121823100" style="zoom:80%;" />

![image-20221027121858025](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027121858025.png)

![image-20221027122018174](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027122018174.png)

- ä¿®æ”¹é»˜è®¤è®¿é—®è·¯å¾„

  ![image-20221027123244931](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027123244931.png)

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027123340206.png" alt="image-20221027123340206" style="zoom: 67%;" />

### 1.2.3 Tomcat Mavenæ’ä»¶

![image-20221027123942130](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027123942130.png)

### 1.2.4 pom.xmlå¯¼å…¥jaråŒ…

maven ä»“åº“è·¯å¾„ï¼š`D:\program\Java\repository\apache-maven-3.6.3\lib`

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨aliyunä»“åº“ **âœ…

ğŸ“ [ä»“åº“æœåŠ¡ (aliyun.com)](https://developer.aliyun.com/mvn/search)   

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025154226588.png" alt="image-20221025154226588" style="zoom: 67%;" />

**æ–¹æ³•äºŒï¼šä½¿ç”¨IDEAè‡ªå¸¦çš„Maven**

ğŸ“ [(170æ¡æ¶ˆæ¯) ã€Mavenã€‘org.codehaus.plexus.component.repository.exception.ComponentLookupException_å¹½çµé›¾çš„åšå®¢-CSDNåšå®¢](https://u05-kid.blog.csdn.net/article/details/126104959)

### 1.2.5 å¯¼å…¥å…¶ä»–Mavené¡¹ç›®

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025170823282.png" alt="image-20221025170823282" style="zoom:67%;" />

# çŸ¥è¯†ç‚¹

## 1ã€jaråŒ…å’ŒwaråŒ…åŒºåˆ«

**jar**æ˜¯javaæ™®é€šé¡¹ç›®æ‰“åŒ…ï¼Œé€šå¸¸æ˜¯å¼€å‘æ—¶è¦å¼•ç”¨é€šç”¨ç±»ï¼Œæ‰“æˆjaråŒ…ä¾¿äºå­˜æ”¾ç®¡ç†ã€‚å½“ä½ ä½¿ç”¨æŸäº›åŠŸèƒ½æ—¶å°±éœ€è¦è¿™äº›jaråŒ…çš„æ”¯æŒï¼Œéœ€è¦å¯¼å…¥jaråŒ…ã€‚

**war**æ˜¯java webé¡¹ç›®æ‰“åŒ…ï¼Œwebç½‘ç«™å®Œæˆåï¼Œæ‰“æˆwaråŒ…éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œç›®çš„æ˜¯ä¸ºäº†èŠ‚çœèµ„æºï¼Œæä¾›æ•ˆç‡ã€‚

## 2ã€Mavenå‘½ä»¤å’Œå£°æ˜å‘¨æœŸ

- **å‘½ä»¤**

`shift+é¼ æ ‡å³é”®` æ‰“å¼€shellçª—å£

`mvn clean`åˆ é™¤targetæ–‡ä»¶å¤¹

`mvn package` å‘½ä»¤ æ‰“åŒ…jaråŒ…æˆ–waråŒ…ï¼Œæ˜¯javaé¡¹ç›®åˆ™jaråŒ…ï¼Œwebé¡¹ç›®åˆ™waråŒ…

`mvn install` å°†ä½†å‰é¡¹ç›®å®‰è£…åˆ°æœ¬åœ°ä»“åº“

- **å£°æ˜å‘¨æœŸ**

  åŒä¸€ä¸ªå£°æ˜å‘¨æœŸï¼Œæ‰§è¡Œåè¾¹çš„å‘½ä»¤ï¼Œå‰è¾¹æ‰€æœ‰çš„å‘½ä»¤éƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œ

  ![image-20221025165336288](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025165336288.png)

## 3ã€Mavené¡¹ç›®ä¾èµ–èŒƒå›´

ğŸ“ [mavenä¾èµ–èŒƒå›´ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/129733579)

- **ç¼–è¯‘ä¾èµ–èŒƒå›´ï¼ˆcompileï¼‰**

  è¯¥èŒƒå›´å°±æ˜¯é»˜è®¤ä¾èµ–èŒƒå›´ï¼Œ**æ­¤ä¾èµ–èŒƒå›´å¯¹äºç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œä¸‰ç§classpathéƒ½æœ‰æ•ˆã€‚**ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡å¦‚é¡¹ç›®ä¸­æœ‰spring-coreçš„ä¾èµ–ï¼Œé‚£ä¹ˆspring-coreä¸ç®¡æ˜¯åœ¨ç¼–è¯‘ï¼Œæµ‹è¯•ï¼Œè¿˜æ˜¯è¿è¡Œéƒ½ä¼šè¢«ç”¨åˆ°ï¼Œå› æ­¤spring-coreå¿…é¡»æ˜¯ç¼–è¯‘èŒƒå›´ï¼ˆæ„ä»¶**é»˜è®¤çš„æ˜¯ç¼–è¯‘èŒƒå›´**ï¼Œæ‰€ä»¥ä¾èµ–èŒƒå›´æ˜¯ç¼–è¯‘èŒƒå›´çš„æ— é¡»æ˜¾ç¤ºæŒ‡å®šï¼‰

- **æµ‹è¯•ä¾èµ–èŒƒå›´ï¼ˆtestï¼‰**

  é¡¾åæ€ä¹‰å°±æ˜¯é’ˆå¯¹äºæµ‹è¯•çš„ï¼Œä½¿ç”¨æ­¤ä¾èµ–èŒƒå›´çš„ä¾èµ–ï¼Œ**åªå¯¹æµ‹è¯•classpathæœ‰æ•ˆ**ï¼Œåœ¨ç¼–è¯‘ä¸»ä»£ç å’Œé¡¹ç›®è¿è¡Œæ—¶ï¼Œéƒ½å°†æ— æ³•ä½¿ç”¨è¯¥ä¾èµ–ã€‚æœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯ Junit,ï¼Œæ„ä»¶åœ¨æµ‹è¯•æ—¶æ‰éœ€è¦ï¼Œæ‰€ä»¥å®ƒçš„ä¾èµ–èŒƒå›´æ˜¯æµ‹è¯•ï¼Œå› æ­¤å®ƒçš„ä¾èµ–èŒƒå›´éœ€è¦æ˜¾ç¤ºæŒ‡å®šä¸º<scope>test</scope> ï¼Œå½“ç„¶ä¸æ˜¾ç¤ºæŒ‡å®šä¾èµ–èŒƒå›´ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è¯¥ä¾èµ–ä¼šè¢«åŠ å…¥åˆ°ç¼–è¯‘å’Œè¿è¡Œçš„classpathä¸­ï¼Œé€ æˆä¸å¿…è¦çš„æµªè´¹ ã€‚

- **è¿è¡Œæ—¶ä¾èµ–èŒƒå›´ï¼ˆruntimeï¼‰**

  ä½¿ç”¨è¯¥ä¾èµ–èŒƒå›´çš„mavenä¾èµ–ï¼Œ**åªå¯¹æµ‹è¯•å’Œè¿è¡Œçš„classpathæœ‰æ•ˆ**ï¼Œå¯¹ç¼–è¯‘çš„classpathæ— æ•ˆï¼Œå…¸å‹ä¾‹å­å°±æ˜¯JDBCçš„é©±åŠ¨å®ç°ï¼Œé¡¹ç›®ä¸»ä»£ç ç¼–è¯‘çš„æ—¶å€™åªéœ€è¦JDKæä¾›çš„JDBCæ¥å£ï¼Œåªæœ‰åœ¨æµ‹è¯•å’Œè¿è¡Œçš„æ—¶å€™æ‰éœ€è¦å®ç°ä¸Šè¿°æ¥å£çš„å…·ä½“JDBCé©±åŠ¨ã€‚

- **å·²æä¾›ä¾èµ–èŒƒå›´ï¼ˆprovidedï¼‰**

  ä½¿ç”¨è¯¥ä¾èµ–èŒƒå›´çš„mavenä¾èµ–ï¼Œ**åªå¯¹ç¼–è¯‘å’Œæµ‹è¯•çš„classpathæœ‰æ•ˆï¼Œå¯¹è¿è¡Œçš„classpathæ— æ•ˆã€‚**å…¸å‹çš„ä¾‹å­å°±æ˜¯servlet-apiï¼Œ ç¼–è¯‘å’Œæµ‹è¯•è¯¥é¡¹ç›®çš„æ—¶å€™éœ€è¦è¯¥ä¾èµ–ï¼Œä½†æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œwebå®¹å™¨å·²ç»æä¾›çš„è¯¥ä¾èµ–ï¼Œæ‰€ä»¥è¿è¡Œæ—¶å°±ä¸å†éœ€è¦æ­¤ä¾èµ–ï¼Œå¦‚æœä¸æ˜¾ç¤ºæŒ‡å®šè¯¥ä¾èµ–èŒƒå›´ï¼Œå¹¶ä¸”å®¹å™¨ä¾èµ–çš„ç‰ˆæœ¬å’Œmavenä¾èµ–çš„ç‰ˆæœ¬ä¸ä¸€è‡´çš„è¯ï¼Œå¯èƒ½ä¼šå¼•èµ·ç‰ˆæœ¬å†²çªï¼Œé€ æˆä¸è‰¯å½±å“ã€‚

- ç³»ç»Ÿä¾èµ–èŒƒå›´ï¼ˆsystemï¼‰

  è¯¥ä¾èµ–ä¸classpathçš„å…³ç³»**ä¸providedä¾èµ–èŒƒå›´å®Œå…¨ä¸€è‡´**ï¼Œä½†æ˜¯ç³»ç»Ÿä¾èµ–èŒƒå›´**å¿…é¡»é€šè¿‡é…ç½®systemPathå…ƒç´ æ¥æ˜¾ç¤ºæŒ‡å®šä¾èµ–æ–‡ä»¶çš„è·¯å¾„**ï¼Œæ­¤ç±»ä¾èµ–ä¸æ˜¯ç”±mavenä»“åº“è§£æçš„ï¼Œè€Œä¸”å¾€å¾€ä¸æœ¬æœºç³»ç»Ÿç»‘å®šï¼Œå¯èƒ½é€ æˆæ„ä»¶çš„ä¸å¯ç§»æ¤ï¼Œå› æ­¤è°¨æ…ä½¿ç”¨ï¼ŒsystemPathå…ƒç´ å¯ä»¥å¼•ç”¨ç¯å¢ƒå˜é‡.

  ```xml
  <dependency>
      <groupId>javax.sql</groupId>
      <artifactId>jdbc-stext</artifactId>
      <version>2.0</version>
      <scope>system</scope>
      <systemPath>${java.home}/lib/rt.jar</systemPath> 
  </dependency>
  ```

- **å¯¼å…¥ä¾èµ–èŒƒå›´ï¼ˆimportï¼‰**

  è¯¥ä¾èµ–èŒƒå›´ä¸ä¼šå¯¹ä¸‰ç§classpathäº§ç”Ÿå½±å“ï¼Œè¯¥ä¾èµ–èŒƒå›´åªèƒ½ä¸dependencyManagementå…ƒç´ é…åˆä½¿ç”¨ï¼Œå…¶åŠŸèƒ½ä¸º**å°†ç›®æ ‡pomæ–‡ä»¶ä¸­dependencyManagementçš„é…ç½®å¯¼å…¥åˆå¹¶åˆ°å½“å‰pomçš„dependencyManagementä¸­**ã€‚

# Servlet

## Servletç®€ä»‹&å¿«é€Ÿå…¥é—¨

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027133724217.png" alt="image-20221027133724217" style="zoom:80%;" />

åŸºæœ¬æ¦‚å¿µï¼š

- Servlet æ˜¯ Java æä¾›çš„ä¸€é—¨åŠ¨æ€webèµ„æºå¼€å‘æŠ€æœ¯
- Servlet æ˜¯JavaEE è§„èŒƒä¹‹ä¸€ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå°†æ¥æˆ‘ä»¬éœ€è¦å®šä¹‰ Servlet ç±»å®ç° Servlet æ¥å£ï¼Œå¹¶ç”±æœåŠ¡å™¨è¿è¡Œ Servlet 

1.  åˆ›å»ºwebé¡¹ç›®ï¼Œå¯¼å…¥Servlet ä¾èµ–åæ ‡ï¼Œåˆ·æ–°Maven

```xml
  <dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.1.0</version>
    <scope>provided</scope>
  </dependency>
```

2. å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°Servletæ¥å£ï¼Œå¹¶é‡å†™æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶åœ¨serviceæ–¹æ³•ä¸­è¾“å…¥ä¸€å¥è¯

```java
public class ServletDemo1 implements Servlet {
    @Override
    public void init(ServletConfig servletConfig) throws ServletException {
    }
    @Override
    public ServletConfig getServletConfig() {
        return null;
    }
    @Override
    public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException {
        System.out.println("å—¨ï¼Œæ¬¢è¿æ‚¨æ¥åˆ° from zero to expert.");
    }
    @Override
    public String getServletInfo() {
        return null;
    }
    @Override
    public void destroy() {
    }
}
```

3. é…ç½®ï¼šåœ¨ç±»ä¸Šä½¿ç”¨@WebServletæ³¨è§£ï¼Œé…ç½®è¯¥Servletçš„è®¿é—®è·¯å¾„

   æ§åˆ¶å°è¾“å‡ºï¼šå—¨ï¼Œæ¬¢è¿æ‚¨æ¥åˆ° from zero to expert.

   ```java
   @WebServlet("/demo1")
   public class ServletDemo1 implements Servlet{
   }
   ```

4. å¯åŠ¨è®¿é—® http://localhost:8080/FromZerotoExpert/demo1

   æ§åˆ¶å°è¾“å‡ºï¼šå—¨ï¼Œæ¬¢è¿æ‚¨æ¥åˆ° from zero to expert.

## Servletæ‰§è¡Œæµç¨‹&ç”Ÿå‘½å‘¨æœŸ

Servletè¿è¡Œåœ¨servletå®¹å™¨(webæœåŠ¡å™¨)ä¸­ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸç”±å®¹å™¨æ¥ç®¡ç†ï¼Œåˆ†ä¸º4ä¸ªé˜¶æ®µ:

1. **åŠ è½½å’Œå®ä¾‹åŒ–:** é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“Servletç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶ï¼Œç”±å®¹å™¨åˆ›å»ºservletå¯¹è±¡
2. **åˆå§‹åŒ–:** åœ¨servletå®ä¾‹åŒ–ä¹‹åï¼Œå®¹å™¨å°†è°ƒç”¨Servletçš„**init()**æ–¹æ³•åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡ï¼Œå®Œæˆä¸€äº›å¦‚
   åŠ è½½é…ç½®æ–‡ä»¶ã€åˆ›å»ºè¿æ¥ç­‰åˆå§‹åŒ–çš„å·¥ä½œã€‚è¯¥æ–¹æ³•**åªè°ƒç”¨ä¸€æ¬¡**
3. **è¯·æ±‚å¤„ç†:** æ¯æ¬¡è¯·æ±‚servletæ—¶ï¼ŒServletå®¹å™¨éƒ½ä¼šè°ƒç”¨servletçš„**service()**æ–¹æ³•å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚
4. **æœåŠ¡ç»ˆæ­¢:** å½“éœ€è¦é‡Šæ”¾å†…å­˜æˆ–è€…å®¹å™¨å…³é—­æ—¶ï¼Œå®¹å™¨å°±ä¼šè°ƒç”¨Sservletå®ä¾‹çš„destroy()æ–¹æ³•å®Œæˆ
   èµ„æºçš„é‡Šæ”¾ã€‚åœ¨**destroy()**æ–¹æ³•è°ƒç”¨ä¹‹åï¼Œå®¹å™¨ä¼šé‡Šæ”¾è¿™ä¸ªServletå®ä¾‹ï¼Œè¯¥å®ä¾‹éšåä¼šè¢«Javaçš„åƒåœ¾æ”¶é›†å™¨æ‰€å›æ”¶ï¼Œæ–¹æ³•è°ƒç”¨ä¸€æ¬¡

`@WebServlet(urlPatterns = "/demo1",loadOnStartup = 1)`

è´Ÿæ•´æ•°ï¼šç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶åˆ›å»ºServletå¯¹è±¡

0æˆ–æ­£æ•´æ•°ï¼šæœåŠ¡å™¨å¯åŠ¨æ—¶åˆ›å»ºServletå¯¹è±¡ï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜



## Servletæ–¹æ³•ä»‹ç»&ä½“ç³»ç»“æ„

### æ–¹æ³•ä»‹ç»

- åˆå§‹åŒ–æ–¹æ³•init()

  ```java
  public void init(ServletConfig servletConfig) throws ServletException {
      this.config=servletConfig;
      System.out.println("init...");
  }
  ```

- æä¾›æœåŠ¡æ–¹æ³•ï¼Œæ¯æ¬¡Servletè¢«è®¿é—®ï¼Œéƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•

  ```Java
  public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException {
      System.out.println("å—¨ï¼Œæ¬¢è¿æ‚¨æ¥åˆ° from zero to expert.");
  }
  ```

- é”€æ¯æ–¹æ³•ï¼Œå½“Servletè¢«é”€æ¯æ—¶ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œåœ¨å†…å­˜é‡Šæ”¾æˆ–æœåŠ¡å™¨å…³é—­æ—¶é”€æ¯Servlet

  ```java
  public void destroy() {
      System.out.println("destory...");
  }
  ```

- è·å–ServletConfigå¯¹è±¡

  ```java
  private ServletConfig config;
  public ServletConfig getServletConfig() {
      return config;
  }
  ```

- è·å–Servletä¿¡æ¯

  ```java
  public String getServletInfo() {
      return null;
  }
  ```

### ä½“ç³»ç»“æ„

- **Servletæ¥å£**

  Servlet ä½“ç³»æ ¹æ¥å£

- **GenericServlet  æŠ½è±¡ç±»**

  1. GenericServletæ˜¯ä¸€ä¸ªé€šç”¨çš„åè®®æ— å…³çš„Servletï¼Œå®ƒå®ç°äº†Servletå’ŒServletConfigæ¥å£ã€‚

  2. GenericServletç»§æ‰¿è‡ªServletï¼Œåº”è¯¥é‡å†™service()æ–¹æ³•ã€‚

- **HttpServletç±»**

  HttpServletæŒ‡èƒ½å¤Ÿå¤„ç†HTTPè¯·æ±‚çš„Servletï¼Œå®ƒåœ¨åŸæœ‰Servletæ¥å£ä¸Šæ·»åŠ äº†å¯¹HTTPåè®®çš„å¤„ç†ï¼Œå®ƒæ¯”Servletæ¥å£çš„åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ã€‚

 ğŸŒ° **HttpServletç±»ä¾‹å­** 

ServletDemo2.java

```Java
@WebServlet("/demo2")
public class ServletDemo2 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        System.out.println("get...");
    }
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        System.out.println("post...");
    }
}
```

test.html

getè¯·æ±‚ï¼šç›´æ¥è®¿é—® http://localhost:8080/FromZerotoExpert/demo2   

post è¯·æ±‚ï¼š

1. è®¿é—®é¡µé¢  http://localhost:8080/FromZerotoExpert/test.html

2. ç‚¹å‡»æäº¤æŒ‰é’®åè·³è½¬è‡³   http://localhost:8080/FromZerotoExpert/demo2   

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>test</h1>
<form action="/FromZerotoExpert/demo2" method="post">
    <input name="username"><input type="submit">
</form>
</body>
</html>
```

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027214455068.png" alt="image-20221027214455068" style="zoom: 80%;" />

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027214946643.png" alt="image-20221027214946643" style="zoom:67%;" />

### è·å–ä¸åŒçš„è¯·æ±‚æ–¹æ³•

æ ¹æ®è¯·æ±‚æ–¹æ³•çš„ä¸åŒï¼Œè¿›è¡Œåˆ†åˆ«çš„å¤„ç†  ï¼š

```java
public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException {
    HttpServletRequest request=(HttpServletRequest) servletRequest;
    // 1. è·å–è¯·æ±‚æ–¹å¼
    String method = request.getMethod();
    // 2. åˆ¤æ–­
    if("GET".equals(method)){
        // getæ–¹å¼çš„å¤„ç†é€»è¾‘
    }else if("POST".equals(method)){
        // postæ–¹æ³•çš„å¤„ç†é€»è¾‘
    }
}
```

åˆ›å»ºè‡ªå·±çš„ç±» MyHttpServlet.java  ï¼š

```java
public class MyHttpServlet implements Servlet {
    @Override
    public void init(ServletConfig servletConfig) throws ServletException {
    }
    @Override
    public ServletConfig getServletConfig() {
        return null;
    }
    @Override
    public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException {
        HttpServletRequest request=(HttpServletRequest) servletRequest;
        // 1. è·å–è¯·æ±‚æ–¹å¼
        String method = request.getMethod();
        // 2. åˆ¤æ–­
        if("GET".equals(method)){
            // getæ–¹å¼çš„å¤„ç†é€»è¾‘
            doGet(servletRequest,servletResponse);
        }else if("POST".equals(method)){
            // postæ–¹æ³•çš„å¤„ç†é€»è¾‘
            doPost(servletRequest,servletResponse);
        }
    }
    // protected æ˜¯ä¸ºäº†è®©æ´¾ç”Ÿç±»èƒ½é‡å†™çˆ¶ç±»æ–¹æ³•
    protected void doPost(ServletRequest servletRequest, ServletResponse servletResponse) {
    }
    protected void doGet(ServletRequest servletRequest, ServletResponse servletResponse) {
    }
    @Override
    public String getServletInfo() {
        return null;
    }
    @Override
    public void destroy() {
    }
}
```

åˆ›å»º MyHttpServletçš„æ´¾ç”Ÿç±»ServletDemo3ï¼Œå¹¶é‡å†™doGet() å’Œ doPost() ï¼š

```java
public class ServletDemo3 extends MyHttpServlet {
    @Override
    protected void doGet(ServletRequest servletRequest, ServletResponse servletResponse) {
        System.out.println("get...");
    }
    @Override
    protected void doPost(ServletRequest servletRequest, ServletResponse servletResponse) {
        System.out.println("post...");
    }
}
```

### Servlet urlPatterné…ç½®

Servletè¦æƒ³è¢«è®¿é—®ï¼Œå¿…é¡»é…ç½®èµ·è®¿é—®è·¯å¾„ï¼ˆrulPatternï¼‰

1. ä¸€ä¸ªServletï¼Œå¯ä»¥é…ç½®å¤šä¸ªurlPattern

   `@WebServlet(urlPatterns = {"/demo1","/demo2"})`

2. urlPatterné…ç½®è§„åˆ™

   1. ç²¾ç¡®åŒ¹é…

      - é…ç½®è·¯å¾„ï¼š@WebServlet(urlPatterns = "user/select")
      - è®¿é—®è·¯å¾„ï¼šhttp://localhost:8080/FromZerotoExpert/user/select

   2. ç›®å½•åŒ¹é…

      - é…ç½®è·¯å¾„ï¼š@WebServlet(urlPatterns = "user/*")

      - è®¿é—®è·¯å¾„ï¼šhttp://localhost:8080/FromZerotoExpert/user/aaa

        â€‹					http://localhost:8080/FromZerotoExpert/user/bbb

   3. æ‰©å±•ååŒ¹é…

      - é…ç½®è·¯å¾„ï¼š@WebServlet(urlPatterns = "*.do")

        > @WebServlet(urlPatterns = "/*.do") æ˜¯é”™è¯¯çš„ï¼Œä¸å¯ä»¥åŠ  ' / ' ç¬¦å·

      - è®¿é—®è·¯å¾„ï¼šhttp://localhost:8080/FromZerotoExpert/aaa.do

        â€‹					http://localhost:8080/FromZerotoExpert/bbb.do

   4. ä»»æ„åŒ¹é…

      - é…ç½®è·¯å¾„ ï¼š

        @WebServlet(urlPatterns = "/") 

        @WebServlet(urlPatterns = "/*") 

      - è®¿é—®è·¯å¾„ï¼š

        http://localhost:8080/FromZerotoExpert/abcd

        http://localhost:8080/FromZerotoExpert/sasf

      - / å’Œ /* çš„åŒºåˆ«

        - å½“é¡¹ç›®ä¸­çš„Servleté…ç½®äº† "/" ä¼šè¦†ç›–tomcatä¸­çš„DefaultServletï¼Œå½“å…¶ä»–çš„url-Pattern éƒ½åŒ¹é…ä¸ä¸Šæ—¶å°±ä¼šèµ°è¿™ä¸ªServlet
        - å½“æˆ‘ä»¬çš„é¡¹ç›®ä¸­é…ç½®äº† "\*" ï¼Œæ„å‘³ç€åŒ¹é…ä»»æ„è®¿é—®è·¯å¾„

## Request&Response

- Request è·å–è¯·æ±‚æ•°æ®

- Response è®¾ç½®å“åº”æ•°æ®

```java
@WebServlet("/requestdemo")
public class RequestDemo extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        // ä½¿ç”¨ request å¯¹è±¡ è·å–è¯·æ±‚æ•°æ®
        String name = req.getParameter("name"); //url?name=zhangsan

        // response è®¾ç½®å“åº”æ•°æ®
        // è®¾ç½®å“åº”å¤´
        resp.setHeader("content-type","text/html;charset=utf-8");
        // è®¾ç½®å“åº”æ¶ˆæ¯è¯·æ±‚æ•°æ®
        resp.getWriter().write("<h1>"+name+"æ¬¢è¿ä½ ï¼</h1>");
    }
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        System.out.println("post...");
    }
}
```

è®¿é—® http://localhost:8080/FromZerotoExpert/requestdemo?name=è”¡å¾å¤

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027230103890.png" alt="image-20221027230103890" style="zoom:67%;" />



### Requestç»§æ‰¿ä½“ç³»

- ServletRequest 

  Javaæä¾›è¯·æ±‚çš„å¯¹è±¡æ ¹æ¥å£

- HttpServletRequest 

  Javaæä¾›åˆ°çš„å¯¹Httpåè®®å°è£…çš„è¯·æ±‚å¯¹è±¡æ¥å£ï¼Œç»§æ‰¿è‡ªServletRequest

- RequestFacade

  Tomcatå®šä¹‰çš„å®ç°ç±»

1. Tomcat éœ€è¦è§£æè¯·æ±‚æ•°æ®ï¼Œå°è£…ä¸ºrequestå¯¹è±¡ï¼Œå¹¶ä¸”åˆ›å»ºrequestå¯¹è±¡ä¼ é€’åˆ°serviceæ–¹æ³•ä¸­
2. ä½¿ç”¨requestå¯¹è±¡ï¼ŒæŸ¥é˜…JavaEE Apiæ–‡æ¡£çš„HttpServletRequest æ¥å£

### Requestè·å–è¯·æ±‚æ•°æ®

è¯·æ±‚æ•°æ®æœ‰ä¸‰éƒ¨åˆ†

1. **è¯·æ±‚è¡Œï¼š**
   - String getMethod() : è·å–è¯·æ±‚æ–¹å¼ï¼šGET
   - String getContextPath() ï¼šè·å–è™šæ‹Ÿç›®å½•ï¼ˆé¡¹ç›®è®¿é—®è·¯å¾„ï¼‰ï¼š/FromZerotoExpert
   - StringBuffer getRequestURL()ï¼šè·å–URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ï¼šhttp://localhost:8080/FromZerotoExpert/requestdemo
   - String getRequestURI() ï¼šè·å–URIï¼ˆç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰ï¼š/FromZerotoExpert/requestdemo
   - String getQueryString() ï¼šè·å–è¯·æ±‚å‚æ•°ï¼ˆGETæ–¹å¼ï¼‰ï¼šusername=zhangsan&password=123

```java
@WebServlet("/requestdemo2")
public class RequestDemo2 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
//        - String getMethod() : è·å–è¯·æ±‚æ–¹å¼ï¼šGET
        String method=req.getMethod();
        System.out.println(method);
//        - String getContextPath() ï¼šè·å–è™šæ‹Ÿç›®å½•ï¼ˆé¡¹ç›®è®¿é—®è·¯å¾„ï¼‰ï¼š/FromZerotoExpert
        String contextPath=req.getContextPath();
        System.out.println(contextPath);
//        - StringBuffer getRequestURL()ï¼šè·å–URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ï¼šhttp://localhost:8080/FromZerotoExpert/requestdemo
        StringBuffer url=req.getRequestURL();
        System.out.println(url);
//        - String getRequestURI() ï¼šè·å–URIï¼ˆç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰ï¼š/FromZerotoExpert/requestdemo
        String uri=req.getRequestURI();
        System.out.println(uri);
//        - String getQueryString() ï¼šè·å–è¯·æ±‚å‚æ•°ï¼ˆGETæ–¹å¼ï¼‰ï¼šusername=zhangsan&password=123
        String queryString = req.getQueryString();
        System.out.println(queryString);

//       - String getHeader(String name)ï¼šæ ¹æ®è¯·æ±‚å¤´åç§°ï¼Œè·å–å€¼
        String agent = req.getHeader("user-agent");
        System.out.println(agent);
//       - ServletInputStream getIuputStream() ï¼šè·å–å­—èŠ‚è¾“å…¥æµ

//       - BufferedReader getReader() ï¼šè·å–å­—ç¬¦è¾“å…¥æµ
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        // è·å–postï¼šè¯·æ±‚ä½“ï¼šè¯·æ±‚å‚æ•°
        // 1. è·å–å­—ç¬¦è¾“å…¥æµ
           // - BufferedReader getReader() ï¼šè·å–å­—ç¬¦è¾“
        BufferedReader br= req.getReader();
        // 2. è¯»å–æ•°æ®
        String line = br.readLine();
        System.out.println(line);
    }
}
```

è®¿é—®ï¼šhttp://localhost:8080/FromZerotoExpert/requestdemo2?name=zhangsan

åå°è¾“å‡ºï¼š

```
GET
/FromZerotoExpert
http://localhost:8080/FromZerotoExpert/requestdemo2
/FromZerotoExpert/requestdemo2
name=zhangsan
```

2. **è¯·æ±‚å¤´**

   Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Mobile Safari/537.36

   - String getHeader(String name)ï¼šæ ¹æ®è¯·æ±‚å¤´åç§°ï¼Œè·å–å€¼

3. **è¯·æ±‚ä½“**

   username=zhangsan&password=123

   - ServletInputStream getIuputStream() ï¼šè·å–å­—èŠ‚è¾“å…¥æµ
   - BufferedReader getReader() ï¼šè·å–å­—ç¬¦è¾“å…¥æµ

requestdemo2.html

è®¿é—®ï¼šhttp://localhost:8080/FromZerotoExpert/requestdemo2.html

è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 

è·³è½¬è‡³ï¼šhttp://localhost:8080/FromZerotoExpert/requestdemo2

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form action="/FromZerotoExpert/requestdemo2 " method="post">
    <input type="text" name="username">
    <input type="password" name="password">
    <input type="submit">
</form>
</body>
</html>
```

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221027235849697.png" alt="image-20221027235849697" style="zoom:80%;" />

æ§åˆ¶å°è¾“å‡ºï¼šusername=theo&password=123



### Requesté€šç”¨æ–¹å¼è·å–è¯·æ±‚å‚æ•°

RequestDemo3.java

```java
@WebServlet("/requestdemo3")
public class RequestDemo3 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        // getè¯·æ±‚é€»è¾‘
        System.out.println("get...");

        // 1. è·å–æ‰€æœ‰é›†åˆå‚æ•°çš„mapé›†åˆ
        Map<String,String[]> map=req.getParameterMap();
        for (String key : map.keySet()) {
            System.out.print(key+":");
            //è·å–å€¼
            String[] values=map.get(key);
            for (String value : values) {
                System.out.print(value+" ");
            }
            System.out.println();
        }

        // 2. æ ¹æ®keyè·å–å‚æ•°å€¼ï¼Œæ•°ç»„
        String[] hobbies=req.getParameterValues("hobby");
        for (String hobby : hobbies) {
            System.out.println(hobby);
        }

        // 3. æ ¹æ®keyè·å–å•ä¸ªå‚æ•°å€¼
        String username=req.getParameter("username");
        String password=req.getParameter("password");
        System.out.println("username:"+username);
        System.out.println("password:"+password);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        // postè¯·æ±‚é€»è¾‘
        System.out.println("post...");
        doGet(req,resp);
    }
}
```

requestdemo3.html

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form action="/FromZerotoExpert/requestdemo3" method="get">
    <input type="'text" name="username">
    <input type="text" name="password">
    <input type="checkbox" name="hobby" value="1">æ¸¸æ³³
    <input type="checkbox" name="hobby" value="2">çˆ¬å±±
    <input type="submit">
</form>
</body>
</html>
```

getè¯·æ±‚æ–¹å¼ï¼Œæäº¤è¡¨å•åæµè§ˆå™¨é“¾æ¥æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯

![image-20221028161312894](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221028161312894.png)![image-20221028161326690](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221028161326690.png)

postè¯·æ±‚æ–¹å¼ï¼Œæµè§ˆå™¨ä¸æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯

![image-20221028161616077](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221028161616077.png)

### è§£å†³è¯·æ±‚å‚æ•°ä¸­æ–‡ä¹±ç 

**åªæœ‰Tomcat8ä¹‹å‰çš„ç‰ˆæœ¬ä¼šæœ‰ä¸­æ–‡ä¹±ç **

POSTï¼šè®¾ç½®è¾“å…¥æµçš„æ–¹æ³•

```java
request.setCharacterEncoding("UTF-8");
```

GETï¼š

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221028202403274.png" alt="image-20221028202403274" style="zoom:80%;" />

URLç¼–ç ï¼š

1. å°†å­—ç¬¦ä¸²æŒ‰ç…§ç¼–ç æ–¹å¼è½¬æˆäºŒè¿›åˆ¶
2. æ¯ä¸ªå­—èŠ‚è½¬æˆ2ä¸ª16è¿›åˆ¶æ•°å¹¶åœ¨å‰é¢åŠ ä¸Š%

è§£é‡Šï¼š

```java
// è§£å†³GETä¸­æ–‡ä¹±ç 
// è·å–username
String username=request.getParameter("username");
// 1. URLç¼–ç 
String encode= URLEncoder.encode(username,"utf-8");
// 2. URLè§£ç 
String decode= URLDecoder.decode(encode,"ISO-8859-1");
// 3. è½¬æ¢ä¸ºå­—èŠ‚æ•°æ®
byte []bytes=decode.getBytes("ISO-8859-1");
// 4. å°†å­—ç¬¦æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²
String s=new String(bytes,"utf-8");
```

GETè§£å†³æ–¹æ³•ï¼š

```java
// è§£å†³GETä¸­æ–‡ä¹±ç 
// getè·å–å‚æ•°çš„æ–¹å¼ï¼šgetQueryString
// ä¹±ç åŸå› ï¼štomcatè¿›è¡ŒURLç¼–ç ï¼Œé»˜è®¤çš„å­—ç¬¦é›†ä¸ºISO-8859-1
// 1.å¯¹ä¹±ç è¿›è¡Œç¼–ç ï¼šè½¬ä¸ºå­—èŠ‚æ•°ç»„
byte []bytes=username.getBytes(StandardCharsets.ISO_8859_1);
// 2. å°†å­—ç¬¦æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²ï¼ˆå­—ç¬¦æ•°ç»„è§£ç ï¼‰
String s=new String(bytes,StandardCharsets.UTF_8);
```

POSTå’ŒGETåˆ†åˆ«çš„è§£å†³æ–¹æ³•ï¼š

```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // è§£å†³GETä¸­æ–‡ä¹±ç 
    String username=request.getParameter("username");
    String s=new String(username.getBytes(StandardCharsets.ISO_8859_1),StandardCharsets.UTF_8);
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // è§£å†³POSTä¸­æ–‡ä¹±ç 
    // POST .getReader()
    request.setCharacterEncoding("UTF-8");//è®¾ç½®å­—ç¬¦è¾“å…¥æµçš„ç¼–ç 
    // 1.è·å–username
    String username=request.getParameter("username");
    System.out.println("username:"+username);
    this.doGet(request, response);
}
```

### Requestè¯·æ±‚è½¬å‘

**è¯·æ±‚è½¬å‘ï¼ˆforwardï¼‰**ï¼šä¸€ç§åœ¨æœåŠ¡å™¨å†…éƒ¨çš„èµ„æºè·³è½¬

å®ç°æ–¹å¼ï¼šreq.getRequestDispatcher("èµ„æºBè·¯å¾„").forward(req,resp);

**è¯·æ±‚è½¬å‘èµ„æºå…±äº«æ•°æ®ï¼š**

- void setAttribute(String name,Object o) ï¼šå­˜å‚¨æ•°æ®åˆ°requesté¢†åŸŸä¸­
- Object getAttribute(String name) ï¼šæ ¹æ®keyå€¼ï¼Œè·å–å€¼
- void removeAttribute(String name)ï¼šæ ¹æ®keyï¼Œåˆ é™¤é”®å¯¹å€¼

**è¯·æ±‚è½¬å‘çš„ç‰¹ç‚¹**ï¼š

- æµè§ˆå™¨è·¯å¾„æ ä¸å‘ç”Ÿå˜åŒ–
- åªèƒ½è½¬å‘åˆ°å½“å‰æœåŠ¡å™¨çš„å†…éƒ¨èµ„æº
- ä¸€æ¬¡è¯·æ±‚ï¼Œå¯ä»¥åœ¨è½¬å‘çš„èµ„æºé—´ä½¿ç”¨requestå…±äº«æ•°æ®

ğŸŒ°è¯·æ±‚è½¬å‘

 RequestDemo4.java

```java
//è¯·æ±‚è½¬å‘ å­˜å‚¨æ•°æ®
@WebServlet("/requestdemo4")
public class RequestDemo4 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("demo4...");
        // å­˜å‚¨æ•°æ®
        request.setAttribute("msg","hello");
        // è¯·æ±‚è½¬å‘
        request.getRequestDispatcher("/requestdemo5").forward(request,response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        this.doGet(request, response);
    }
}
```

RequestDemo5.java

```java
/// è¯·æ±‚è½¬å‘ è·å–æ•°æ®
@WebServlet("/requestdemo5")
public class RequestDemo5 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("demo5...");
        // è·å–æ•°æ®
        Object msg=request.getAttribute("msg");
        System.out.println(msg);
    }
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        this.doGet(request, response);
    }
}
```

### Responseå“åº”æ•°æ®åŠŸèƒ½ä»‹ç»

å“åº”æ•°æ®ä¸‰éƒ¨åˆ†ï¼š

1. **å“åº”è¡Œ**

   `HTTP/1.1 200 OK`

   - void setStatus(int sc) ï¼šè®¾ç½®å“åº”çŠ¶æ€ç 

2. **å“åº”å¤´**

   `Content-Type:text/html`

   - void setHeader(String name,String value)ï¼šè®¾ç½®å“åº”é”®å¯¹å€¼

3. **å“åº”ä½“**

   `<html><head></head><body></body></html>`

   - PrintWrite getWrite() ï¼šè·å–å­—ç¬¦è¾“å‡ºæµ
   - ServletOutputStream getOutputStream() ï¼šè·å–å­—èŠ‚è¾“å‡ºæµ

### Responseé‡å®šå‘

**é‡å®šå‘ï¼ˆRedirectï¼‰ï¼š**ä¸€ç§èµ„æºè·³è½¬æ–¹å¼

**å®ç°æ–¹å¼ï¼š**

- æ–¹å¼ä¸€ï¼š

  ```java
  // 1. è®¾ç½®å“åº”çŠ¶æ€ç 
  response.setStatus(302);
  // 2. è®¾ç½®å“åº”å¤´ location 
  response.setHeader("location","è™šæ‹Ÿè·¯å¾„2çš„åç§°");
  // response.setHeader("location","/FromZerotoExpert/responsedemo2");
  ```

- æ–¹æ³•äºŒï¼š

```java
response.sendRedirect(""è™šæ‹Ÿè·¯å¾„2çš„åç§°"");
// response.sendRedirect("/FromZerotoExpert/responsedemo2");
// response.sendRedirect("https://www.baidu.com/");
```

**é‡å®šå‘çš„ç‰¹ç‚¹ï¼š**

- æµè§ˆå™¨åœ°å€æ è·¯å¾„å‘ç”Ÿå˜åŒ–
- å¯ä»¥é‡å®šå‘åˆ°ä»»æ„ä½ç½®çš„èµ„æºï¼ˆæœåŠ¡å™¨å†…éƒ¨ï¼Œå¤–éƒ¨å‡å¯ï¼‰
- ä¸¤æ¬¡è¯·æ±‚ï¼Œä¸èƒ½åœ¨å¤šä¸ªèµ„æºä½¿ç”¨requestå…±äº«æ•°æ®

### èµ„æºè®¿é—®è·¯å¾„é—®é¢˜

**æ˜ç¡®è·¯å¾„è°ä½¿ç”¨**

- æµè§ˆå™¨ä½¿ç”¨ï¼šéœ€è¦åŠ è™šæ‹Ÿç›®å½•ï¼ˆé¡¹ç›®è®¿é—®è·¯å¾„ï¼‰
- æœåŠ¡å™¨ä½¿ç”¨ï¼šä¸éœ€è¦åŠ è™šæ‹Ÿç›®å½•

ç»ƒä¹ ï¼š

- `<a href="è·¯å¾„">`  åŠ è™šæ‹Ÿç›®å½•
- `<form action="è·¯å¾„">` åŠ è™šæ‹Ÿç›®å½•
- `request.getRequestDispatcher("è·¯å¾„")` ä¸åŠ è™šæ‹Ÿç›®å½• ï¼ˆè¯·æ±‚è½¬å‘ï¼‰
- `response.getRedirect("è·¯å¾„")` åŠ è™šæ‹Ÿç›®å½• ï¼ˆé‡å®šå‘ï¼‰

**åŠ¨æ€è·å–è™šæ‹Ÿç›®å½•å®Œæˆé‡å®šå‘**

```java
// åŠ¨æ€è·å–è™šæ‹Ÿç›®å½•å®Œæˆé‡å®šå‘
String contextpath=request.getContextPath();
response.sendRedirect(contextpath+"/responsedemo2");
```

### Responseå“åº”å­—ç¬¦&å“åº”å­—èŠ‚

**Responseå“åº”å­—ç¬¦**ï¼š

**ä½¿ç”¨ï¼š**

1. é€šè¿‡Responseå¯¹è±¡è·å–å­—ç¬¦è¾“å‡ºæµ

   ```java
   PrintWriter writer=response.getWriter();
   ```

2. å†™æ•°æ®

   ```java
   writer.write("ä½ å¥½");
   writer.write("<h1>ä½ å¥½</h1>");
   ```

**æ³¨æ„ï¼š**

- è¯¥æµä¸éœ€è¦å…³é—­ï¼Œéšç€å“åº”ç»“æŸï¼Œresponseå¯¹è±¡é”€æ¯ï¼Œç”±æœåŠ¡å™¨å…³é—­

- ä¸­æ–‡æ•°æ®ä¹±ç ï¼šåŸå› é€šè¿‡Responseè·å–çš„å­—ç¬¦è¾“å‡ºæµé»˜è®¤ç¼–ç æ˜¯ISO-8859-1

  ```java
  response.setContentType("text/html;charset=utf-8");
  ```

ğŸŒ°

```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    System.out.println("ResponseDemo3...");
    // ç”±äºé»˜è®¤ä»¥çº¯æ–‡æœ¬è¾“å‡ºï¼Œè®¾ç½®åhtmlæ ‡ç­¾å¯è¢«è§£æ,ç¼–ç æ–¹å¼å¯è®©ä¸­æ–‡ä¸ä¹±å—
    response.setContentType("text/html;charset=utf-8");
    PrintWriter writer=response.getWriter();
    writer.write("ä½ å¥½");
    writer.write("<h1>ä½ å¥½</h1>");
}
```



**Responseå“åº”å­—èŠ‚**ï¼š

**ä½¿ç”¨ï¼š**

1. é€šè¿‡Responseå¯¹è±¡è·å–

```java
ServletOutputStream os =response.getOutputStream();
```

2. å†™æ•°æ®

   ```java
   outputStream.write(å­—èŠ‚æ•°æ®);
   ```

**IOUtilså·¥å…·ç±»ä½¿ç”¨**

1. å¯¼å…¥åæ ‡

```xml
<dependency>
  <groupId>commons-io</groupId>
  <artifactId>commons-io</artifactId>
  <version>2.6</version>
</dependency>
```

2. ä½¿ç”¨

   ```java
   IOUtils.copy(è¾“å…¥æµ,è¾“å‡ºæµ)
   ```

ğŸŒ°

```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // 1. è¯»å–æ–‡ä»¶
    FileInputStream fis=new FileInputStream("D:\\program\\Java\\source\\pic.jpg");
    // 2. è·å–responseå­—èŠ‚è¾“å‡ºæµ
    ServletOutputStream os =response.getOutputStream();
    // 3. å®Œæˆæµçš„copy
        /*  byte[] buff = new byte[1024];
        int len=0;
        while ((len=fis.read(buff))!=-1){
            os.write(buff,0,len);
        }*/
    IOUtils.copy(fis,os); // ç”¨å·¥å…·commons-io
    fis.close();
}
```

## IDEAæ¨¡æ¿åˆ›å»ºServlet

![image-20221028162643921](C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221028162643921.png)

ä¿®æ”¹IDEAé‡Œçš„æ¨¡æ¿

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221028162938235.png" alt="image-20221028162938235" style="zoom:80%;" />

åŸå§‹æ¨¡æ¿ï¼š

```java
#if (${PACKAGE_NAME} && ${PACKAGE_NAME} != "")package ${PACKAGE_NAME};#end
#parse("File Header.java")

#if ($JAVAEE_TYPE == "jakarta")
import jakarta.servlet.*;
import jakarta.servlet.http.*;
import jakarta.servlet.annotation.*;
#else
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.*;
#end
import java.io.IOException;

@WebServlet(name = "${Entity_Name}", value = "/${Entity_Name}")
public class ${Class_Name} extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }
}
```

ä¿®æ”¹åï¼š

```java
#if (${PACKAGE_NAME} && ${PACKAGE_NAME} != "")package ${PACKAGE_NAME};#end
#parse("File Header.java")

#if ($JAVAEE_TYPE == "jakarta")
import jakarta.servlet.*;
import jakarta.servlet.http.*;
import jakarta.servlet.annotation.*;
#else
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.*;
#end
import java.io.IOException;

@WebServlet("/${Entity_Name}")
public class ${Class_Name} extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        this.doGet(request,response);
    }
}
```

### 



# Problem

## 1ã€mavené¡¹ç›®jspé¡µé¢è¾“å‡ºä¸­æ–‡ä¹±ç 

- [x] å·²è§£å†³

ğŸ“ [(170æ¡æ¶ˆæ¯) idea mavené¡¹ç›® jspé¡µé¢ä¸­æ–‡ä¹±ç é—®é¢˜_find_some_wayçš„åšå®¢-CSDNåšå®¢_idea jspé¡µé¢ä¸­æ–‡ä¹±ç ](https://blog.csdn.net/baidu_28647571/article/details/83024677)

**ç¬¬ä¸€æ­¥ï¼Œä¿®æ”¹ç¼–ç æ–¹å¼ä¸ºUTF-8**

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025103829413.png" alt="image-20221025103829413" style="zoom: 67%;" />

**2ã€jspé¡µé¢ä¸­æ·»åŠ ï¼ˆé‡è¦ï¼‰**

```jsp
<%@ page language="java" contentType="text/html; charset=utf-8" pageEncoding="utf-8" %>
```

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025104114682.png" alt="image-20221025104114682" style="zoom:80%;" />

## 2ã€æ— æ³•è§£æjaråŒ…

ğŸ“ [(170æ¡æ¶ˆæ¯) dependency â€˜mysql-connector-javaâ€˜not found_Dirty Boyçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/weixin_43006208/article/details/107536374)

å–æ¶ˆå‹¾é€‰

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025132043499.png" alt="image-20221025132043499" style="zoom: 50%;" />

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025132421049.png" alt="image-20221025132421049" style="zoom: 50%;" />

<img src="C:\Users\asus\AppData\Roaming\Typora\typora-user-images\image-20221025132540070.png" alt="image-20221025132540070" style="zoom:67%;" />
